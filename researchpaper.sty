\ProvidesPackage{researchpaper}

\usepackage{fontspec}

\usepackage{polyglossia}
  \setdefaultlanguage{english}

\usepackage{csquotes}
\usepackage[
  backend=biber,
  style=ieee
]{biblatex}

\usepackage[
  left=1in,
  right=1in,
  top=1in,
  bottom=1in
]{geometry}

\usepackage{xcolor}
  \definecolor{mplblue}{HTML}{1f77b4}
  \definecolor{mplred}{HTML}{d62728}
  \definecolor{tablegray}{gray}{0.8}

\usepackage{hyperref}
  \hypersetup{
    colorlinks,
    linkcolor=mplblue,
    citecolor=mplred,
    urlcolor=mplred
  }

\usepackage{fancyhdr}
  \pagestyle{fancy}
  \fancyhf{}
  \rhead{Connell \thepage}

\usepackage{pgf}
\usepackage[font=footnotesize, labelfont=bf]{caption}
% \renewcommand{\figureautorefname}{fig.}
\renewcommand{\equationautorefname}{eq.}
\newcommand*{\Appendixautorefname}{appendix}
\usepackage{subcaption}

\newcommand{\figwidth}{0.95\columnwidth}
\newcommand{\insertfigure}[2][]{
  \begin{figure}[ht]
    \centering
    \resizebox{\figwidth}{!}{\input{./figures/#2.pgf}}
    \caption{#1}
  \end{figure}
}

\newcommand{\insertsubfigure}[5]{
  \begin{figure}[ht]
  \centering
    \begin{subfigure}{\columnwidth}
      \centering
      \resizebox{\figwidth}{!}{\input{./figures/#3.pgf}}
      \caption{#1}
    \end{subfigure}
    \begin{subfigure}{\columnwidth}
      \centering
      \resizebox{\figwidth}{!}{\input{./figures/#4.pgf}}
      \caption{#2}
    \end{subfigure}
  \caption{#5}
  \end{figure}
}

\usepackage{threeparttable}
\usepackage{booktabs}
\usepackage{tabularx}
  \captionsetup[table]{
    labelsep=space,
    justification=raggedright,
    singlelinecheck=off
  }

\newcommand{\tablewidth}{\linewidth}
\newcommand{\inserttable}[2][]{
  \begin{table*}[tb]
    \centering
    \large
    \colorbox{tablegray}{%
      \begin{threeparttable}
        \caption{#1}
        \input{./tables/#2}
      \end{threeparttable}
    }
  \end{table*}
}

\usepackage{bm}
\usepackage{amssymb}
\usepackage{amsmath}
  \DeclareMathOperator*{\argmax}{argmax}
  \newcommand{\myvec}[1]{\vec{#1}}
  \newcommand{\mymat}[1]{\bm{#1}}

\newenvironment{sbmatrix}[1]
 {\def\mysubscript{#1}\mathop\bgroup\begin{bmatrix}}
 {\end{bmatrix}\egroup_{\textstyle\mathstrut\mysubscript}}

\newlength{\defaultbaselineskip}
\setlength{\defaultbaselineskip}{\baselineskip}

\renewcommand{\maketitle}{%
  \setlength\baselineskip{3em}
  \makeatletter
  \vspace{3em}
  {\Huge\textbf{\@title}} \\
  {\large\@author} \\ \vspace{1em}
  \makeatother
  \setlength\baselineskip{\defaultbaselineskip}
}

\renewcommand{\abstract}[1]{%
  \rule{\textwidth}{0.25mm}
  \emph{\input{./sections/Abstract}}
  \rule{\textwidth}{0.25mm}
}

\newcommand{\maketitleandabstract}[1]{%
  \thispagestyle{empty}
  \twocolumn[
    \begin{@twocolumnfalse}
      \centering
      \maketitle
      \abstract{#1}
    \end{@twocolumnfalse}
  ]
}

\usepackage{sectsty}
  \sectionfont{\color{mplblue}}
  \subsectionfont{\normalsize}
  \subsubsectionfont{\normalsize\normalfont\emph}
  \paragraphfont{\normalfont\emph}

\newcommand{\inputsection}[1]{\section{#1} \input{./sections/#1}}
\newcommand{\inputsubsection}[2]{\subsection{#1} \input{./sections/#2}}
\newcommand{\subsubsubsection}[1]{\vspace{0.5em} \emph{#1:} \\[0.5em]}

\newcommand{\inputappendix}[2]{\section{#1} \input{./appendices/#2}}
